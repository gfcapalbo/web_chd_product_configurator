 <openerp><data>

  <template id="assets_product_configurator" inherit_id="website.assets_frontend" name="chd_product_configurator">
  <xpath expr="." position="inside">
      <script type="text/javascript" src="/website_chd_product_configurator/static/src/js/website_chd_product_configurator.js"></script>
      <link rel='stylesheet' href='/website_chd_product_configurator/static/src/css/website_chd_product_configurator.css'/>
  </xpath>
  </template>
  <template id="conf_start">
    <t t-call="website.layout">
      <t t-set="title">Product Configurator</t>
      <div class="oe_structure"/>
      <div class="oe_structure">
        <div class="container">
        <h3>configurable products available</h3>
         <form t-attf-action="/chd_init/" method="post" >
            <select t-attf-name="selected_id" class= "form-control product_selection" id="prod_select_id">
                <option></option>
                <t t-foreach="conf_products" t-as="conf_product">
                    <option t-att-value="conf_product.id" class= "form-control product_selection">
                         <t t-esc="conf_product.name"/>
                    </option>
                </t>
           </select>
        <button type="submit" class="btn btn-primary btn-lg pull-center" >Select Configurable Product</button>
        </form>
        <div class="clearfix"/>
        </div>
      </div>
      <div class="oe_structure"/>
    </t>
  </template>

 <template id="configurator">
    <t t-call="website.layout">
       <t t-set="title">Product Configurator</t>
          <div class="oe_structure"/>
          <div class="oe_structure">
          <div class="container">
            <h3>Configuration options for <t t-esc="curr_product_id.name" /></h3>
            <form id="mainf" t-attf-action="/chd_init/#{ curr_product_id.id }/" method="post"  enctype="multipart/form-data"  class="form-horizontal">
            <div class="row">
                <div class="col-sm-9">
                    <div class="row">
                         <div class="col-sm-1" >
                            <label for="quantity" >Quantity</label>
                         </div>
                         <div class="col-sm-2" >
                            <input required="true" type="number"  min="0" name="quantity" class="form-control input-sm"/>
                        </div>
                    </div>
                    <div t-if="curr_product_id.chd_size_type in ('fixed')" class="row">
                        <div class="col-sm-8" >
                            <label for="size">Size (fixed choices available):
                                <select required="true" t-attf-name="size" class="form-control input-sm size_selection" id="size_select_id">
                                <option></option>
                                <t t-foreach="curr_product_id.chd_size_ids" t-as="curr_size">
                                     <option  t-att-value="curr_size.id" >
                                             <t t-esc="curr_size.name"/>
                                     </option>
                                </t>
                                </select>
                            </label>
                        </div>
                    </div>
                    <div t-if="curr_product_id.chd_size_type in ('dynamic')" class="row">
                            <div class="col-sm-6">
                                       <div class="row">
                                            <div class="col-sm-2">
                                                <label for="size">Width</label>
                                            </div>
                                            <div class="col-sm-4">
                                                <input required="true" type="number"  min="0" size="7" name="width" class="form-control input-sm"/>
                                            </div>
                                       </div>
                                       <div class="row">
                                          <div class="col-sm-2">
                                            <label for="size">Height</label>
                                          </div>
                                          <div class="col-sm-4">
                                            <input required="true" type="number"  min="0" size="7" name="height" class="form-control input-sm" />
                                          </div>
                                       </div>
                            </div>

                        <div class="col-xs-4">
                            <div >
                                 <table>
                                 <thead>
                                    <tr>
                                        <td>
                                        <strong> Available size range:</strong>
                                        </td>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr>
                                        <td>
                                         Width:
                                        </td>
                                        <td>
                                        From <t t-esc="curr_product_id.chd_min_width"/> to <t t-esc="curr_product_id.chd_max_width"/>
                                        </td>
                                    </tr>
                                      <tr>
                                        <td>
                                          height:
                                        </td>
                                        <td>
                                         From <t t-esc="curr_product_id.chd_min_height"/> to <t t-esc="curr_product_id.chd_max_height"/>
                                        </td>
                                    </tr>
                                 </tbody>
                                 </table>
                            </div>

                        </div>
                    </div>
                    <div class="unselected-field" style="display: inline-block;">
                         <label>Type:
                         <select t-attf-name="type" class="form-control type_selection" id="type_select_id">
                                <option></option>
                                <t t-foreach="curr_types" t-as="curr_type">
                                    <option t-att-value="curr_type.id" class="form-control type_selection">
                                         <t t-esc="curr_type.name"/>
                                    </option>
                                </t>
                          </select>
                        </label>
                    </div>
                    <div class="unselected-field" style="display: inline-block;">
                         <label>Finishing:
                         <select t-attf-name="finishing" class= "form-control fini_selection" id="fini_select_id">
                            <!-- filled by js -->
                          </select>
                        </label>
                    </div>
                         <div class="form-group">
                              <div class="col-xs-9">
                                    <h3> Attributes </h3>
                                    <label for="Accessories"> Available Accessories </label>
                                     <ul  t-attf-name="accessories" class="accessories_selection" id="accessories_select_id" t-att-multiple="multiple">
                                                  <t t-foreach="avail_accessories" t-as="curr_accessory">
                                                            <li t-att-value="curr_accessory.id" >
                                                            <div class="row" style="border-bottom: 0.5px solid;padding-top: 2px;padding-bottom: 2px;">
                                                                <div class="col-xs-7">
                                                                    <label class="checkbox-inline">
                                                                        <input type="checkbox" t-attf-name="accessoryid_#{str(curr_accessory.id)}" > <t t-esc="curr_accessory.name"/></input>
                                                                    </label>
                                                                </div>
                                                                <div class="col-xs-5" style="border-left: 0.5px solid;">
                                                                    <label id="small_listquantity" for="quantity_acc">Quantity</label>
                                                                    <input t-attf-name="qtyaccessoryid_#{str(curr_accessory.id)}" type="number"  min="0" t-att-maxlength="3" t-att-size="4" />
                                                                </div>
                                                            </div>
                                                            </li>
                                                  </t>
                                        </ul>
                               </div>
                           </div>
                           <div class="form-group">
                               <div class="col-xs-4">
                                    <p id="out_msg"></p>
                               </div>
                               <div class="col-xs-2">
                                    <button type="submit" class="btn btn-primary btn-lg pull-center" >See Quotations</button>
                                </div>
                            </div>
                    <input type="hidden" name="product_id" t-att-value="curr_product_id.id"/>
                    <input type="hidden" name="product_id_chd_size_type" t-att-value="curr_product_id.chd_size_type"/>
                 </div>
                     <div t-if="curr_product_id.chd_configurator_has_image" class="col-sm-3">
                            <div id="imagearea">
                                  <input class="btn btn-default btn-lg pull-left" type="file" name="pic" accept="image/*" required="true"/>
                            </div>
                            <div id="feedback" t-if="errormsg">
                                  <p><t t-esc="errormsg"/></p>
                            </div>
                     </div>
            </div>
           </form>
          </div>
       </div>
      <div class="oe_structure"/>
    </t>
  </template>


   <template id="sale_options">
    <t t-call="website.layout">
      <t t-set="title">Sale Options</t>
      <div class="oe_structure"/>
      <div class="oe_structure">
        <div class="container">
        <h3>Sale options for <t t-esc="curr_product_id.name" />  </h3>
        <div class="row mt12">
                           <div class="col-sm-8">
                                          <div class="row mt12">
                                                <div class="col-sm-4"><p><b>Product: </b></p></div>
                                                <div class="col-sm-4"><t t-esc="curr_chd.origin_product_id.name" /></div>
                                           </div>
                                           <div class="row mt12">
                                                <div class="col-sm-4"><p><b>config name: </b></p></div>
                                                <div class="col-sm-6"><t t-esc="curr_chd.result_product_id.name" /></div>
                                           </div>
                                           <div class="row mt12">
                                                <div class="col-sm-4"><p><b>Quantity: </b></p></div>
                                                <div class="col-sm-4"><t t-esc="curr_chd.quantity" /></div>
                                           </div>
                                           <div class="row mt12">
                                                <div class="col-sm-4"><p><b>HeightxWidth: </b></p></div>
                                                <div class="col-sm-4"> <t t-esc="curr_chd.height" />  x  <t t-esc="curr_chd.width"/></div>
                                           </div>
                           </div>
                           <div class="col-sm-4">
                                  <div class="row mt12 solid">
                                               <div class="row mt12">
                                                    <div class="col-sm-6"><p><b>Chosen Accessories </b></p></div>
                                               </div>
                                               <div class="row mt12">
                                                    <div class="col-sm-3"><p><b>Accessory </b></p></div>
                                                    <div class="col-sm-3"><p><b>Quantity </b></p></div>
                                               </div>
                                               <div class="row mt32">
                                                    <t t-foreach="curr_chd.accessoire_line_ids" t-as="curr_accessory">
                                                        <div class="col-sm-3"><p><t t-esc="curr_accessory.product_id.name"/></p></div>
                                                        <div class="col-sm-3"><p> <t t-esc="curr_accessory.quantity"/></p></div>
                                                    </t>
                                               </div>
                                   </div>
                           </div>

        </div>
        <separator/>
        <div class="row mt12">
                <t t-foreach="results" t-as="result">
                   <form t-attf-action="/chd_init/buy#{result.id}/" method="post" class="form-horizontal">
                       <input type="hidden" name="result_obj" t-att-value="result" />
                       <div  class="row" style="border-bottom: 0.5px solid;" id="sale_option">
                       <br/>
                            <div class="col-xs-4">
                                <p>Cost price for supplier : <t t-esc="result.standard_price"/> </p>
                                <p>Customer price : <t t-esc="result.customer_price"/> </p>
                            </div>
                            <div class="col-xs-4">
                                <p>Total order amount ex. VAT : <t t-esc="result.total_amount_ex_vat"/> </p>
                                <br/>
                            </div>
                            <div class="col-xs-4">
                                <p>Expected date of delivery: <t t-esc="result.date_delivery"/> </p>
                                <br/>
                            </div>
                        <button id="buy" type="submit" class="btn btn-primary btn-lg pull-right" >Buy</button>
                        </div>
                    </form>
                </t>
         </div>
        </div>
      </div>
      <div class="oe_structure"/>
      </t>
  </template>

     <template id="buy_option">
    <t t-call="website.layout">
      <t t-set="title">Buy</t>
      <div class="oe_structure"/>
      <div class="oe_structure">
        <div class="container">
        <h3>Buy </h3>
        <br/>
        <h3> You have brought <t t-esc="configuration_form"/> </h3>
        <h3> frobnicate! <t t-esc="result"/> </h3>
        </div>
      </div>
      <div class="oe_structure"/>
      </t>
  </template>

  </data></openerp>